(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{lXdu:function(t,e,o){"use strict";o.r(e),o.d(e,"BooksModule",(function(){return J}));var i=o("ofXK"),a=o("tyNb"),n=o("+0xr"),r=o("M9IT"),c=o("Dh3D"),b=o("fXoL"),s=o("AytR"),d=o("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.apiUrl=s.a.booksApiUrl}getBooks(){return this.http.get(this.apiUrl)}getBook(t){return this.http.get(`${this.apiUrl}/${t}`)}createBook(t){return this.http.post(""+this.apiUrl,t)}updateBook(t){return this.http.put(""+this.apiUrl,t)}deleteBook(t){return this.http.delete(`${this.apiUrl}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(b.ac(d.b))},t.\u0275prov=b.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=o("kmnG"),h=o("qFsG"),p=o("bTqV"),m=o("Qu3c"),g=o("NFeN");function f(t,e){if(1&t){const t=b.Xb();b.Wb(0,"button",1),b.dc("click",(function(){b.vc(t);const o=e.index;return b.hc().onClick(o+1)})),b.Wb(1,"mat-icon"),b.Cc(2),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,o=e.index,i=b.hc();b.nc("id","star_"+o)("matTooltip",t+1),b.Eb(2),b.Ec(" ",i.showIcon(o)," ")}}let k=(()=>{class t{constructor(){this.ratingUpdated=new b.o,this.ratingStars=[]}ngOnInit(){for(let t=0;t<5;t++)this.ratingStars.push(t)}onClick(t){this.ratingUpdated.emit(t)}showIcon(t){return this.rating>=t+1?"star":"star_border"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Kb({type:t,selectors:[["app-star-rating"]],inputs:{rating:"rating"},outputs:{ratingUpdated:"ratingUpdated"},decls:1,vars:1,consts:[["mat-icon-button","","color","accent","matTooltipPosition","above",3,"id","matTooltip","click",4,"ngFor","ngForOf"],["mat-icon-button","","color","accent","matTooltipPosition","above",3,"id","matTooltip","click"]],template:function(t,e){1&t&&b.Bc(0,f,3,3,"button",0),2&t&&b.nc("ngForOf",e.ratingStars)},directives:[i.k,p.a,m.a,g.a],styles:[""]}),t})();function V(t,e){1&t&&(b.Wb(0,"th",14),b.Cc(1,"Title"),b.Vb())}function W(t,e){if(1&t&&(b.Wb(0,"td",15),b.Wb(1,"a",16),b.Cc(2),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.Eb(1),b.oc("routerLink","/books/",t.id,""),b.Eb(1),b.Dc(t.title)}}function v(t,e){1&t&&(b.Wb(0,"th",14),b.Cc(1,"Author(s)"),b.Vb())}function C(t,e){if(1&t&&(b.Wb(0,"span"),b.Cc(1),b.Vb()),2&t){const t=e.$implicit,o=e.last;b.Eb(1),b.Fc(" ",t,"",o?"":", ","\xa0 ")}}function D(t,e){if(1&t&&(b.Wb(0,"td",15),b.Bc(1,C,2,2,"span",17),b.Vb()),2&t){const t=e.$implicit;b.Eb(1),b.nc("ngForOf",t.authors)}}function E(t,e){1&t&&(b.Wb(0,"th",14),b.Cc(1,"Your rating"),b.Vb())}function y(t,e){if(1&t&&(b.Wb(0,"td",15),b.Rb(1,"app-star-rating",18),b.Vb()),2&t){const t=e.$implicit;b.Eb(1),b.nc("rating",t.rating)}}function R(t,e){1&t&&b.Rb(0,"th",14)}const M=function(t){return["/books",t,"edit"]};function w(t,e){if(1&t&&(b.Wb(0,"td",15),b.Wb(1,"button",19),b.Wb(2,"mat-icon"),b.Cc(3,"edit"),b.Vb(),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.Eb(1),b.nc("routerLink",b.qc(1,M,t.id))}}function B(t,e){1&t&&b.Rb(0,"tr",20)}function S(t,e){1&t&&b.Rb(0,"tr",21)}const I=function(){return[5,10,15,25]};let F=(()=>{class t{constructor(t){this.bookService=t,this.displayedColumns=["title","author","rating","actions"]}ngOnInit(){this.bookService.getBooks().subscribe(t=>{this.books=t,this.dataSource=new n.k(this.books),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(u))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-books"]],viewQuery:function(t,e){var o;1&t&&(b.zc(r.a,!0),b.zc(c.a,!0)),2&t&&(b.sc(o=b.ec())&&(e.paginator=o.first),b.sc(o=b.ec())&&(e.sort=o.first))},decls:24,vars:5,consts:[[1,"row"],[1,"col-md-6"],["matInput","",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","author"],["matColumnDef","rating"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[4,"ngFor","ngForOf"],[3,"rating"],["mat-icon-button","",1,"editIcon",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Wb(0,"h1"),b.Cc(1,"Your Book List"),b.Vb(),b.Wb(2,"div",0),b.Wb(3,"mat-form-field",1),b.Wb(4,"mat-label"),b.Cc(5,"Filter books"),b.Vb(),b.Wb(6,"input",2),b.dc("keyup",(function(t){return e.applyFilter(t)})),b.Vb(),b.Vb(),b.Vb(),b.Wb(7,"div",3),b.Wb(8,"table",4),b.Ub(9,5),b.Bc(10,V,2,0,"th",6),b.Bc(11,W,3,2,"td",7),b.Tb(),b.Ub(12,8),b.Bc(13,v,2,0,"th",6),b.Bc(14,D,2,1,"td",7),b.Tb(),b.Ub(15,9),b.Bc(16,E,2,0,"th",6),b.Bc(17,y,2,1,"td",7),b.Tb(),b.Ub(18,10),b.Bc(19,R,1,0,"th",6),b.Bc(20,w,4,3,"td",7),b.Tb(),b.Bc(21,B,1,0,"tr",11),b.Bc(22,S,1,0,"tr",12),b.Vb(),b.Rb(23,"mat-paginator",13),b.Vb()),2&t&&(b.Eb(8),b.nc("dataSource",e.dataSource),b.Eb(13),b.nc("matHeaderRowDef",e.displayedColumns),b.Eb(1),b.nc("matRowDefColumns",e.displayedColumns),b.Eb(1),b.nc("pageSizeOptions",b.pc(4,I)))},directives:[l.b,l.e,h.b,n.j,c.a,n.c,n.e,n.b,n.g,n.i,r.a,n.d,c.b,n.a,a.e,i.k,k,p.a,a.c,g.a,n.f,n.h],styles:[""]}),t})();var O=o("LRne"),T=o("Wp6s"),U=o("f0Cb");function q(t,e){if(1&t&&(b.Wb(0,"span"),b.Cc(1),b.Vb()),2&t){const t=e.$implicit,o=e.last;b.Eb(1),b.Fc(" ",t,"",o?"":", ","\xa0 ")}}const $=function(t){return["/books",t,"edit"]},L=function(){return["/books"]};function x(t,e){if(1&t&&(b.Wb(0,"mat-card"),b.Wb(1,"mat-card-header"),b.Wb(2,"mat-card-title"),b.Cc(3),b.Vb(),b.Vb(),b.Wb(4,"mat-card-content"),b.Wb(5,"div",1),b.Wb(6,"div",2),b.Cc(7,"Author(s)"),b.Vb(),b.Wb(8,"div",3),b.Bc(9,q,2,2,"span",4),b.Vb(),b.Vb(),b.Wb(10,"div",1),b.Wb(11,"div",2),b.Cc(12,"Description"),b.Vb(),b.Wb(13,"div",3),b.Cc(14),b.Vb(),b.Vb(),b.Rb(15,"mat-divider",5),b.Wb(16,"div",1),b.Wb(17,"div",2),b.Cc(18,"Publication details"),b.Vb(),b.Wb(19,"div",3),b.Wb(20,"div"),b.Cc(21),b.ic(22,"date"),b.Vb(),b.Wb(23,"div"),b.Cc(24),b.Vb(),b.Vb(),b.Vb(),b.Rb(25,"mat-divider",5),b.Wb(26,"div",1),b.Wb(27,"div",2),b.Cc(28,"Reading details"),b.Vb(),b.Wb(29,"div",3),b.Wb(30,"div"),b.Cc(31),b.ic(32,"date"),b.Vb(),b.Wb(33,"div"),b.Cc(34),b.ic(35,"date"),b.Vb(),b.Wb(36,"div"),b.Cc(37," Rating: "),b.Rb(38,"app-star-rating",6),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(39,"mat-card-actions"),b.Wb(40,"button",7),b.Cc(41,"Edit"),b.Vb(),b.Wb(42,"button",8),b.Cc(43,"Back to book list"),b.Vb(),b.Vb(),b.Vb()),2&t){const t=e.ngIf;b.Eb(3),b.Dc(t.title),b.Eb(6),b.nc("ngForOf",t.authors),b.Eb(5),b.Dc(t.description),b.Eb(1),b.nc("inset",!0),b.Eb(6),b.Ec(" Publish date: ",b.kc(22,12,t.publishDate,"dd/MM/yyyy"),""),b.Eb(3),b.Ec(" Publisher: ",t.publisher,""),b.Eb(1),b.nc("inset",!0),b.Eb(6),b.Ec(" Start Reading Date: ",b.kc(32,15,t.startReadingDate,"dd/MM/yyyy"),""),b.Eb(3),b.Ec(" Read date: ",b.kc(35,18,t.readDate,"dd/MM/yyyy"),""),b.Eb(4),b.nc("rating",t.rating),b.Eb(2),b.nc("routerLink",b.qc(21,$,t.id)),b.Eb(2),b.nc("routerLink",b.pc(23,L))}}let A=(()=>{class t{constructor(t,e){this.route=t,this.bookService=e}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");if(isNaN(+t)&&"new"===t){const t={id:0,title:"",authors:[],description:"",publishDate:new Date,publisher:"",startReadingDate:null,readDate:null,rating:0};this.book$=Object(O.a)(t)}else this.book$=this.bookService.getBook(+t)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(a.a),b.Qb(u))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-book-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"row"],[1,"mat-subheading-2","col-md-2"],[1,"col-md-10"],[4,"ngFor","ngForOf"],[1,"my-3",3,"inset"],[3,"rating"],["color","primary","mat-button","",3,"routerLink"],["color","accent","mat-button","",3,"routerLink"]],template:function(t,e){1&t&&(b.Bc(0,x,44,24,"mat-card",0),b.ic(1,"async")),2&t&&b.nc("ngIf",b.jc(1,1,e.book$))},directives:[i.l,T.a,T.d,T.f,T.c,i.k,U.a,k,T.b,p.a,a.c],pipes:[i.b,i.e],styles:[""]}),t})();var N=o("3Pt+"),P=o("A5z7"),Q=o("iadO");function z(t,e){if(1&t){const t=b.Xb();b.Wb(0,"mat-chip",24),b.dc("removed",(function(){b.vc(t);const o=e.$implicit;return b.hc(2).removeAuthor(o)})),b.Cc(1),b.Wb(2,"mat-icon",25),b.Cc(3,"cancel"),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit;b.Eb(1),b.Ec(" ",t," ")}}function j(t,e){if(1&t){const t=b.Xb();b.Wb(0,"form"),b.Wb(1,"div",4),b.Wb(2,"mat-form-field",5),b.Wb(3,"mat-label"),b.Cc(4,"Title"),b.Vb(),b.Wb(5,"input",6),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().book.title=e})),b.Vb(),b.Vb(),b.Vb(),b.Wb(6,"div",4),b.Wb(7,"mat-form-field",7),b.Wb(8,"mat-label"),b.Cc(9,"Add author"),b.Vb(),b.Wb(10,"input",8),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().author=e})),b.Vb(),b.Vb(),b.Wb(11,"button",9),b.dc("click",(function(){return b.vc(t),b.hc().addAuthor()})),b.Cc(12,"Add author"),b.Vb(),b.Wb(13,"mat-chip-list",10,11),b.Bc(15,z,4,1,"mat-chip",12),b.Vb(),b.Vb(),b.Wb(16,"div",4),b.Wb(17,"mat-form-field",5),b.Wb(18,"mat-label"),b.Cc(19,"Description"),b.Vb(),b.Wb(20,"textarea",13),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().book.description=e})),b.Vb(),b.Vb(),b.Vb(),b.Wb(21,"div",4),b.Wb(22,"mat-form-field",14),b.Wb(23,"mat-label"),b.Cc(24,"Publish Date"),b.Vb(),b.Wb(25,"input",15),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().book.publishDate=e})),b.Vb(),b.Rb(26,"mat-datepicker-toggle",16),b.Rb(27,"mat-datepicker",null,17),b.Vb(),b.Wb(29,"mat-form-field",7),b.Wb(30,"mat-label"),b.Cc(31,"Publisher"),b.Vb(),b.Wb(32,"input",18),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().book.publisher=e})),b.Vb(),b.Vb(),b.Vb(),b.Wb(33,"div",4),b.Wb(34,"mat-form-field",14),b.Wb(35,"mat-label"),b.Cc(36,"Start Reading Date"),b.Vb(),b.Wb(37,"input",19),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().book.startReadingDate=e})),b.Vb(),b.Rb(38,"mat-datepicker-toggle",16),b.Rb(39,"mat-datepicker",null,20),b.Vb(),b.Wb(41,"mat-form-field",14),b.Wb(42,"mat-label"),b.Cc(43,"Read Date"),b.Vb(),b.Wb(44,"input",21),b.dc("ngModelChange",(function(e){return b.vc(t),b.hc().book.readDate=e})),b.Vb(),b.Rb(45,"mat-datepicker-toggle",16),b.Rb(46,"mat-datepicker",null,22),b.Vb(),b.Wb(48,"div",14),b.Wb(49,"mat-label"),b.Cc(50,"Rating "),b.Vb(),b.Wb(51,"app-star-rating",23),b.dc("ratingUpdated",(function(e){return b.vc(t),b.hc().onRatingChanged(e)})),b.Vb(),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=b.tc(28),e=b.tc(40),o=b.tc(47),i=b.hc();b.Eb(5),b.nc("ngModel",i.book.title),b.Eb(5),b.nc("required",i.authorRequired)("ngModel",i.author),b.Eb(5),b.nc("ngForOf",i.book.authors),b.Eb(5),b.nc("ngModel",i.book.description),b.Eb(5),b.nc("matDatepicker",t)("ngModel",i.book.publishDate),b.Eb(1),b.nc("for",t),b.Eb(6),b.nc("ngModel",i.book.publisher),b.Eb(5),b.nc("matDatepicker",e)("ngModel",i.book.startReadingDate),b.Eb(1),b.nc("for",e),b.Eb(6),b.nc("matDatepicker",o)("ngModel",i.book.readDate),b.Eb(1),b.nc("for",o),b.Eb(6),b.nc("rating",i.book.rating)}}const X=function(){return["/books"]},K=[{path:"",component:F},{path:":id",component:A},{path:":id/edit",component:(()=>{class t{constructor(t,e,o){this.route=t,this.router=e,this.bookService=o,this.authorRequired=!0,this.pageTitle="Edit book",this.errorMessage=""}ngOnInit(){this.route.params.subscribe(t=>{const e=t.id;isNaN(+e)&&"new"===e?(this.book={id:0,title:"",authors:[],description:"",publishDate:new Date,publisher:"",startReadingDate:null,readDate:null,rating:0},this.authorRequired=!0,this.pageTitle="Add book"):this.bookService.getBook(+e).subscribe(t=>{this.book=t,this.authorRequired=0===this.book.authors.length,this.pageTitle="Edit book"})})}addAuthor(){this.author&&(this.book.authors.push(this.author),this.authorRequired=!1),this.author=null}removeAuthor(t){const e=this.book.authors.indexOf(t);e>=0&&(this.book.authors.splice(e,1),this.authorRequired=0===this.book.authors.length)}onRatingChanged(t){this.book.rating=t}saveBook(){0===this.book.id?this.bookService.createBook(this.book).subscribe({next:()=>this.router.navigate(["/books"]),error:t=>this.errorMessage=t}):this.bookService.updateBook(this.book).subscribe({next:()=>this.router.navigate(["/books"]),error:t=>this.errorMessage=t})}deleteBook(){this.bookService.deleteBook(this.book.id).subscribe({next:()=>this.router.navigate(["/books"]),error:t=>this.errorMessage=t})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(a.a),b.Qb(a.b),b.Qb(u))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-book-edit"]],decls:13,vars:4,consts:[[4,"ngIf"],["color","primary","mat-raised-button","",3,"click"],["color","warn","mat-button","",3,"click"],["color","accent","mat-button","",3,"routerLink"],[1,"row"],[1,"col"],["matInput","","type","text","required","","name","title",3,"ngModel","ngModelChange"],[1,"col-8"],["matInput","","type","text","name","author",3,"required","ngModel","ngModelChange"],["mat-button","","color","primary",1,"col-2","bnt-small",3,"click"],["aria-label","Authors",1,"col-12","mb-2"],["chipList",""],["removable","",3,"removed",4,"ngFor","ngForOf"],["matInput","","type","text","matTextareaAutosize","","required","","name","description",3,"ngModel","ngModelChange"],[1,"col-4"],["matInput","","required","","name","publishDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["publishDate",""],["matInput","","type","text","required","","name","publisher",3,"ngModel","ngModelChange"],["matInput","","name","startReadingDate",3,"matDatepicker","ngModel","ngModelChange"],["startReadingDate",""],["matInput","","name","readDate",3,"matDatepicker","ngModel","ngModelChange"],["readDate",""],[3,"rating","ratingUpdated"],["removable","",3,"removed"],["matChipRemove",""]],template:function(t,e){1&t&&(b.Wb(0,"mat-card"),b.Wb(1,"mat-card-header"),b.Wb(2,"mat-card-title"),b.Cc(3),b.Vb(),b.Vb(),b.Wb(4,"mat-card-content"),b.Bc(5,j,52,16,"form",0),b.Vb(),b.Wb(6,"mat-card-actions"),b.Wb(7,"button",1),b.dc("click",(function(){return e.saveBook()})),b.Cc(8,"Save"),b.Vb(),b.Wb(9,"button",2),b.dc("click",(function(){return e.deleteBook()})),b.Cc(10,"Delete"),b.Vb(),b.Wb(11,"button",3),b.Cc(12,"Cancel"),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Eb(3),b.Dc(e.pageTitle),b.Eb(2),b.nc("ngIf",e.book),b.Eb(6),b.nc("routerLink",b.pc(3,X)))},directives:[T.a,T.d,T.f,T.c,i.l,T.b,p.a,a.c,N.n,N.i,N.j,l.b,l.e,h.b,N.b,N.l,N.h,N.k,P.b,i.k,h.d,Q.b,Q.d,l.f,Q.a,k,P.a,g.a,P.c],styles:[""]}),t})()}];let H=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(K)],a.f]}),t})();var G=o("PCNd");let J=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,G.a,H]]}),t})()}}]);